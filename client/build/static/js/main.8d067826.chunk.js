(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{142:function(e,t,a){e.exports=a(423)},146:function(e,t,a){},423:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(24),l=a.n(r),c=(a(146),a(79)),o=a.n(c),i=a(134),m=a(141),u=a(7),d=a(8),h=a(3),p=a(10),v=a(9),g=Object(n.createContext)(null);function b(){return s.a.createElement("div",{className:"navbar-nav "},s.a.createElement("a",{className:"nav-link nav-item",href:"sell"},"Sell"),s.a.createElement("a",{className:"nav-link nav-item",href:"signin"},"Sign in"),s.a.createElement("a",{className:"nav-link nav-item",href:"signup"},"Sign Up"))}var E=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).LogOut=n.LogOut.bind(Object(h.a)(n)),n}return Object(d.a)(a,[{key:"LogOut",value:function(){localStorage.removeItem("auth-token"),this.context.setUserData({token:void 0,user:void 0})}},{key:"render",value:function(){return s.a.createElement("div",{className:"navbar-nav "},s.a.createElement("a",{className:"nav-link nav-item",href:"sell"},"Sell"),s.a.createElement("a",{className:"nav-link nav-item",href:"#",onClick:this.LogOut},"logout"))}}]),a}(s.a.Component);E.contextType=g;var f=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).setState({login:!1}),n}return Object(d.a)(a,[{key:"render",value:function(){return s.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark "},s.a.createElement("a",{className:"navbar-brand",href:"\\"},"AuctionZone"),void 0==this.context.userData.token?s.a.createElement(b,null):s.a.createElement(E,null))}}]),a}(s.a.Component);f.contextType=g;var C=f,N=a(15),k=a.n(N);var j=function(e){return s.a.createElement("div",{className:"carousel slide","data-ride":"carousel"},s.a.createElement("div",{className:"carousel-inner img-thumbnail"},s.a.createElement("div",{className:"carousel-item active "},s.a.createElement("img",{src:"car.jpg",className:"d-block w-100",alt:"..."})),s.a.createElement("div",{className:"carousel-item"},s.a.createElement("img",{src:"tv.jpg",className:"d-block w-100",alt:"..."})),s.a.createElement("div",{className:"carousel-item"},s.a.createElement("img",{src:"flat.jpg",className:"d-block w-100",alt:"..."}))))},y=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={data:{}},k.a.get("/item/"+n.props.uid).then((function(e){n.setState({data:e.data})})),n}return Object(d.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"card mt-5"},s.a.createElement("div",{className:"card-body"},s.a.createElement("p",{className:"card-title display-4"},this.state.data.name),s.a.createElement("hr",{className:"my-4"}),s.a.createElement("h2",{className:"card-text"}," Sold by ",this.state.data.seller),s.a.createElement("h3",{className:"card-text"}," $",this.state.data.cost),s.a.createElement("button",{className:"btn btn-block btn-primary"},"Buy Now")))}}]),a}(n.Component),w=a(30),O=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).props.location.state?n.state={uid:n.props.location.state.id}:n.state={redirect:!0},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return this.state.redirect?s.a.createElement(w.a,{to:"/"}):s.a.createElement("div",{className:"row item-row"},s.a.createElement("div",{className:"col col-md-6 col-sm-12 csl-cont"},s.a.createElement(j,null)),s.a.createElement("div",{className:"col"},s.a.createElement(y,{uid:this.state.uid})))}}]),a}(n.Component),S=a(48);var x=function(e){return s.a.createElement(S.b,{to:{pathname:"item",state:{id:e.uid}}},"      ",s.a.createElement("div",{className:"card icard"},s.a.createElement("img",{src:e.img,className:"card-img-top",alt:"..."}),s.a.createElement("div",{className:"card-body"},s.a.createElement("h5",{className:"card-title"},e.name),s.a.createElement("h5",{className:"card-title"},"Starting from $",e.cost),s.a.createElement("div",{className:"card-subtitle"},e.cond))))},U=(a(167),function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={items:[]},k.a.get("/item/").then((function(e){n.setState({items:e.data})})),n}return Object(d.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col col-8 basecard"},this.state.items.map((function(e,t){return s.a.createElement(x,{key:t,uid:e._id,name:e.name,cond:e.condition,cost:e.cost,img:e.image})}))))}}]),a}(n.Component)),D=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).matching=n.matching.bind(Object(h.a)(n)),n.onUsernameChange=n.onUsernameChange.bind(Object(h.a)(n)),n.passwordChange=n.passwordChange.bind(Object(h.a)(n)),n.cpasswordChange=n.cpasswordChange.bind(Object(h.a)(n)),n.onSubmit=n.onSubmit.bind(Object(h.a)(n)),n.mobileChange=n.mobileChange.bind(Object(h.a)(n)),n.mailChange=n.mailChange.bind(Object(h.a)(n)),n.state={username:"",password:"",cpassword:"",match:!0,mobile:"",mail:"",valid:""},n}return Object(d.a)(a,[{key:"mailChange",value:function(e){this.setState({mail:e.target.value},(function(){}),(function(){}))}},{key:"mobileChange",value:function(e){this.setState({mobile:e.target.value})}},{key:"matching",value:function(){this.state.password!=this.state.cpassword?this.setState({match:!1}):this.setState({match:!0})}},{key:"passwordChange",value:function(e){this.setState({password:e.target.value},this.matching)}},{key:"cpasswordChange",value:function(e){this.setState({cpassword:e.target.value},this.matching)}},{key:"onUsernameChange",value:function(e){this.setState({username:e.target.value})}},{key:"onSubmit",value:function(e){var t=this,a=!0;/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(this.state.mail).toLowerCase())||(console.log("f"),a=!1),0==this.state.username.length&&(console.log("a"),a=!1),this.state.match&&0!=this.state.password.length||(console.log("g"),a=!1),10!=this.state.mobile.length&&(console.log("n"),a=!1),a?(console.log(this.state.username+this.state.password),k.a.post("/user/register",{username:this.state.username,password:this.state.password,mobile:this.state.mobile,mail:this.state.mail}).then((function(e){200==e.status&&console.log("registration success"),t.setState({username:"",password:"",cpassword:"",mobile:"",mail:"",valid:""})})).catch((function(e){t.setState({valid:e.response.data.error})}))):alert("fill out the fields")}},{key:"render",value:function(){return s.a.createElement("div",{className:"row  d-flex justify-content-center"},s.a.createElement("div",{className:"col col-4  mt-5"},s.a.createElement("h1",{className:"display-4"},"Sell your stuff"),s.a.createElement("h2",null,"Register Here"),s.a.createElement("div",{className:"input-group"},s.a.createElement("input",{name:"uname",id:"uname",onChange:this.onUsernameChange,value:this.state.username,placeholder:"Username"}),s.a.createElement("p",null,this.state.valid)),s.a.createElement("div",{className:"input-group mt-2"},s.a.createElement("input",{name:"Mobile",value:this.state.mobile,type:"text",placeholder:"Mobile",onChange:this.mobileChange})),s.a.createElement("div",{className:"input-group mt-2"},s.a.createElement("input",{name:"Email",value:this.state.mail,type:"email",placeholder:"Email",onChange:this.mailChange})),s.a.createElement("div",{className:"input-group mt-2"},s.a.createElement("input",{name:"pass",value:this.state.password,type:"password",placeholder:"password",onChange:this.passwordChange})),s.a.createElement("div",{className:"input-group mt-2"},s.a.createElement("input",{name:"cpass",value:this.state.cpassword,type:"password",placeholder:"Confirm password",onChange:this.cpasswordChange})),s.a.createElement("button",{className:"btn btn-md btn-danger mt-4",onClick:this.onSubmit},"Sign Up")))}}]),a}(n.Component),I=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).onUsernameChange=n.onUsernameChange.bind(Object(h.a)(n)),n.onPassChange=n.onPassChange.bind(Object(h.a)(n)),n.onSubmit=n.onSubmit.bind(Object(h.a)(n)),n.state={username:"",password:""},n}return Object(d.a)(a,[{key:"onUsernameChange",value:function(e){this.setState({username:e.target.value})}},{key:"onPassChange",value:function(e){this.setState({password:e.target.value})}},{key:"onSubmit",value:function(e){var t=this;k.a.post("/user/login",{username:this.state.username,password:this.state.password}).then((function(e){200==e.status&&(console.log(e.data),localStorage.setItem("auth-token",e.data.token),t.context.setUserData({token:e.data.token}),t.props.history.push("/"))})),console.log(this.state.username),this.setState({username:"",password:""})}},{key:"render",value:function(){return s.a.createElement("div",{className:"row  d-flex justify-content-center"},s.a.createElement("div",{className:"col col-4  mt-5"},s.a.createElement("h1",{className:"display-4"},"Sell your stuff"),s.a.createElement("h2",null,"Sign In"),s.a.createElement("div",{className:"input-group"},s.a.createElement("input",{name:"uname",id:"uname",onChange:this.onUsernameChange,value:this.state.username,placeholder:"Username"})),s.a.createElement("div",{className:"input-group mt-2"},s.a.createElement("input",{name:"pass",type:"password",placeholder:"password",onChange:this.onPassChange})),s.a.createElement("button",{className:"btn btn-md btn-danger mt-4",onClick:this.onSubmit},"Sign in")))}}]),a}(n.Component);I.contextType=g;var L=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={name:"",cost:"",condition:"",seller:""},n.handleItem=n.handleItem.bind(Object(h.a)(n)),n.onNameChange=n.onNameChange.bind(Object(h.a)(n)),n.onCostChange=n.onCostChange.bind(Object(h.a)(n)),n.onConditionChange=n.onConditionChange.bind(Object(h.a)(n)),n}return Object(d.a)(a,[{key:"onNameChange",value:function(e){this.setState({name:e.target.value,seller:this.context.userData.user.username})}},{key:"onCostChange",value:function(e){this.setState({cost:e.target.value})}},{key:"onConditionChange",value:function(e){this.setState({condition:e.target.value})}},{key:"handleItem",value:function(e){e.preventDefault();var t=new FormData;t.append("name",this.state.name),t.append("condition",this.state.condition),t.append("cost",this.state.cost),t.append("seller",this.state.seller),t.append("file",this.uploadInput.files[0]),t.append("filename","prodimage1"),k.a.post("/item/new",t,{headers:{"x-auth-token":this.context.userData.token}}).then((function(e){console.log("success")}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("form",{onSubmit:this.handleItem},s.a.createElement("div",{className:"input-group mt-4"},s.a.createElement("input",{name:"name",placeholder:"Name",value:this.state.name,onChange:this.onNameChange})),s.a.createElement("div",{className:"input-group mt-4"},s.a.createElement("input",{name:"cost",placeholder:"Cost",value:this.state.cost,onChange:this.onCostChange})),s.a.createElement("div",{className:"input-group mt-4"},s.a.createElement("input",{name:"condition",placeholder:"condition",value:this.state.condition,onChange:this.onConditionChange})),s.a.createElement("div",{className:"input-group mt-4"},s.a.createElement("input",{ref:function(t){e.uploadInput=t},type:"file"})),s.a.createElement("button",{className:"btn btn-primary mt-5"},"Submit")))}}]),a}(s.a.Component);L.contextType=g;var P=function(e){return s.a.createElement("div",{class:"row"},s.a.createElement("div",{class:"col-4 "},s.a.createElement("div",{className:"jumbotron"},s.a.createElement("div",{className:"container"},s.a.createElement("h1",{className:"display-4"},"Get a good price for your items"),s.a.createElement("p",{class:"lead"},"Fill the Details to sell your item")))),s.a.createElement("div",{class:"col-8"},s.a.createElement(L,null)))};var T=function(){var e=Object(n.useState)({token:void 0,user:void 0}),t=Object(m.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){console.log("refreshed"),function(){var e=Object(i.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=localStorage.getItem("auth-token"))&&(localStorage.setItem("auth-token",""),t=""),e.next=4,k.a.post("/user/isTokenValid",null,{headers:{"x-auth-token":t}});case 4:if(!e.sent.data){e.next=10;break}return e.next=8,k.a.get("/user/userData",{headers:{"x-auth-token":t}});case 8:a=e.sent,r({token:t,user:a.data});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]),s.a.createElement(S.a,null,s.a.createElement(g.Provider,{value:{userData:a,setUserData:r}},s.a.createElement(C,null),s.a.createElement(w.d,null,s.a.createElement(w.b,{path:"/sell"},s.a.createElement(P,null)," "),s.a.createElement(w.b,{path:"/signin",component:I}),s.a.createElement(w.b,{path:"/signup"},s.a.createElement(D,null)),s.a.createElement(w.b,{path:"/item/",component:O}),s.a.createElement(w.b,{path:"/"},s.a.createElement(U,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[142,1,2]]]);
//# sourceMappingURL=main.8d067826.chunk.js.map